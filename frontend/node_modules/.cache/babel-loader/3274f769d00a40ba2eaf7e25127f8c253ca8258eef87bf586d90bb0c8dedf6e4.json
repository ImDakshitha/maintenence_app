{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'../utils/axios.js';import{useNavigate}from'react-router-dom';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const[requests,setRequests]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{const fetchRequests=async()=>{const token=localStorage.getItem('token');if(!token){navigate('/login');return;}try{const response=await axios.get('/requests',{headers:{Authorization:\"Bearer \".concat(token)}});setRequests(response.data);}catch(err){console.error(\"Error fetching requests: \",err);setError('Failed to fetch requests. Please try again later.');}finally{setLoading(false);}};fetchRequests();},[navigate]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error});}const handleLogout=()=>{localStorage.removeItem('token');navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"dashboard-title\",children:\"Maintenance Requests\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/request-form'),className:\"btn btn-primary\",children:\"Add Request\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"btn btn-danger logout-button\",children:\"Logout\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Request ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Requested By ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:requests.map(request=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:request.id}),/*#__PURE__*/_jsx(\"td\",{children:request.type}),/*#__PURE__*/_jsx(\"td\",{children:request.location}),/*#__PURE__*/_jsx(\"td\",{children:request.description}),/*#__PURE__*/_jsx(\"td\",{children:request.requestedById}),/*#__PURE__*/_jsx(\"td\",{children:request.status})]},request.id))})]})]});}export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Dashboard","requests","setRequests","loading","setLoading","error","setError","navigate","fetchRequests","token","localStorage","getItem","response","get","headers","Authorization","concat","data","err","console","className","children","handleLogout","removeItem","onClick","map","request","id","type","location","description","requestedById","status"],"sources":["D:/MSc/Semester 2/CSC 505/CSC 527 505 ASSIGNMENT/maintenance_app/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from '../utils/axios.js';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './Dashboard.css';\r\n\r\nfunction Dashboard() {\r\n    const [requests, setRequests] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const fetchRequests = async () => {\r\n            const token = localStorage.getItem('token');\r\n            if (!token) {\r\n                navigate('/login');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const response = await axios.get('/requests', {\r\n                    headers: { Authorization: `Bearer ${token}` },\r\n                });\r\n                setRequests(response.data);\r\n            } catch (err) {\r\n                console.error(\"Error fetching requests: \", err);\r\n                setError('Failed to fetch requests. Please try again later.');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchRequests();\r\n    }, [navigate]);\r\n\r\n    if (loading) {\r\n        return <div className=\"loading\">Loading...</div>;\r\n    }\r\n\r\n    if (error) {\r\n        return <div className=\"error-message\">{error}</div>;\r\n    }\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('token'); \r\n        navigate('/');\r\n    };\r\n\r\n    return (\r\n        <div className=\"dashboard-container\">\r\n            <h1 className=\"dashboard-title\">Maintenance Requests</h1>\r\n            <button onClick={() => navigate('/request-form')} className=\"btn btn-primary\">Add Request</button>\r\n            <button onClick={handleLogout} className=\"btn btn-danger logout-button\">Logout</button>\r\n            <table className=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Request ID</th>\r\n                        <th>Type</th>\r\n                        <th>Location</th>\r\n                        <th>Description</th>\r\n                        <th>Requested By ID</th>\r\n                        <th>Status</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {requests.map((request) => (\r\n                        <tr key={request.id}>\r\n                            <td>{request.id}</td>\r\n                            <td>{request.type}</td>\r\n                            <td>{request.location}</td>\r\n                            <td>{request.description}</td>\r\n                            <td>{request.requestedById}</td>\r\n                            <td>{request.status}</td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}